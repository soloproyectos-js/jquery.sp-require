/*! jQuery.spRequire v0.1.4 | Copyright (c) 2015 Gonzalo Chumillas | https://github.com/soloproyectos-js/jquery.sp-require/blob/master/LICENSE */
!function(r){r.spRequireUtil=function(){},r.spRequireUtil.arrayUnique=function(e){var i=[];return r.each(e,function(r,e){var s=i.indexOf(e);0>s&&i.push(e)}),i}}(jQuery),function(r){r.spRequireConfig=function(r){this._parse(r)},r.spRequireConfig.prototype._libraries={},r.spRequireConfig.prototype._parse=function(e){var i=this;r.isPlainObject(e)||r.error("Invalid config object"),this._libraries={};var s=e.libraries||{};r.each(s,function(e,s){var t={},o=r.type(s);"string"==o?t=i._parseString(s):"array"==o?t=i._parseArray(s):"object"==o?t=i._parseObject(s):r.error("Invalid library '"+e+"'. Expected 'string', 'Array.<string>' or '{\n	sources: {\n		js: Array.<string>,  // not required\n		css: Array.<string>  // not required\n	},\n	requires: Array.<string> // not required\n}'"),i._libraries[e]=t})},r.spRequireConfig.prototype._parseString=function(r){return{jsSources:[r],cssSources:[],requires:[]}},r.spRequireConfig.prototype._parseArray=function(e){var i={jsSources:[],cssSources:[],requires:[]};return r.each(e,function(e,s){"string"!=r.type(s)&&r.error("Invalid 'libraries.<library>' property. Expected 'Array.<string>'"),i.jsSources.push(s)}),i},r.spRequireConfig.prototype._parseObject=function(e){var i={jsSources:[],cssSources:[],requires:[]},s=e.sources||{},t=s.js||[];"array"!=r.type(t)&&r.error("Invalid 'libraries.<libName>.sources.js' attribute"),r.each(t,function(e,s){"string"!=r.type(s)&&r.error("Invalid 'libraries.<libName>.sources.js[string]' value"),i.jsSources.push(s)});var o=s.css||[];"array"!=r.type(o)&&r.error("Invalid 'libraries.<libName>.sources.css' attribute"),r.each(o,function(e,s){"string"!=r.type(s)&&r.error("Invalid 'libraries.<libName>.sources.css[string]' value"),i.cssSources.push(s)});var n=e.requires||[];return"array"!=r.type(n)&&r.error("Invalid 'libraries.requires' attribute"),r.each(n,function(e,s){"string"!=r.type(s)&&r.error("Invalid 'libraries.<libName>.requires[string]' value"),i.requires.push(s)}),i},r.spRequireConfig.prototype.getLibraries=function(){return this._libraries}}(jQuery),function(r){r.spRequireLibrary=function(){this._libraries=[],this._jsSources=[],this._cssSources=[]},r.spRequireLibrary.prototype._libraries=null,r.spRequireLibrary.prototype._jsSources=null,r.spRequireLibrary.prototype._cssSources=null,r.spRequireLibrary.prototype.addJs=function(r){this._jsSources.push(this._getAbsoluteUrl(r))},r.spRequireLibrary.prototype.addCss=function(r){this._cssSources.push(this._getAbsoluteUrl(r))},r.spRequireLibrary.prototype.addLibrary=function(r){this._libraries.push(r)},r.spRequireLibrary.prototype._getJsSources=function(){return this._getSources("_jsSources")},r.spRequireLibrary.prototype._getCssSources=function(){return this._getSources("_cssSources")},r.spRequireLibrary.prototype._getSources=function(e,i){var s=[];return void 0===i&&(i=[]),i.push(this),r.each(this._libraries,function(){if(r.inArray(this,i)<0){var t=this._getSources(e,i);Array.prototype.push.apply(s,t)}}),Array.prototype.push.apply(s,this[e]),r.spRequireUtil.arrayUnique(s)},r.spRequireLibrary.prototype._getAbsoluteUrl=function(r){var e=document.createElement("a");return e.href=r,e.href}}(jQuery),function(r){r.spRequireManager=function(){this._libraries=[]},r.spRequireManager.prototype._libraries=null,r.spRequireManager.prototype.addLibrary=function(r){this._libraries.push(r)},r.spRequireManager.prototype.load=function(){return this._loadCss(),this._loadJs()},r.spRequireManager.prototype._loadCss=function(){var e=this._getCssSources();r(function(){r.each(e,function(e,i){r("head").append(r('<link rel="stylesheet" type="text/css" />').attr("href",i))})})},r.spRequireManager.prototype._loadJs=function(){var e=new r.Deferred,i=this._getJsSources(),s=i.length,t=!0;return r(function(){s>0?r.each(i,function(i,o){r.ajax({url:o,dataType:"script",cache:!0}).fail(function(r,e,i){"parsererror"==e&&console.error(i),t=!1}).always(function(){s--,1>s&&e[t?"resolve":"reject"]()})}):e.resolve()}),e.promise()},r.spRequireManager.prototype._getJsSources=function(){return this._getSources("_getJsSources")},r.spRequireManager.prototype._getCssSources=function(){return this._getSources("_getCssSources")},r.spRequireManager.prototype._getSources=function(e){var i=[];return r.each(this._libraries,function(){var r=this[e]();Array.prototype.push.apply(i,r)}),r.spRequireUtil.arrayUnique(i)}}(jQuery),function(r){var e={},i={},s={init:function(e,s){var t=new r.spRequireManager;return r.each(e,function(e,s){var o=i[s];void 0===o&&r.error("Library not found: "+s),t.addLibrary(i[s])}),t.load().done(s)},config:function(s){if(void 0!==s){var t=new r.spRequireConfig(s),o=t.getLibraries();i={},r.each(o,function(e,s){var t=s.jsSources,o=s.cssSources,n=new r.spRequireLibrary;r.each(t,function(r,e){n.addJs(e)}),r.each(o,function(r,e){n.addCss(e)}),i[e]=n}),r.each(o,function(e,s){var t=s.requires;if(void 0!==t){var o=i[e];r.each(t,function(e,s){var t=i[s];void 0===t&&r.error("Library not found: "+s),o.addLibrary(t)})}}),e=s}return e}};r.require=function(){var e=Array.prototype.slice.call(arguments),i="init";e.length>0&&"string"==r.type(e[0])&&(i=e[0],e=e.slice(1));var t=s[i];return void 0===t&&r.error("Method not found: "+i),t.apply(this,e)}}(jQuery);