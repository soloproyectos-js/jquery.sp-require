/*! jQuery.spRequire v0.1.0 | Copyright (c) 2015 Gonzalo Chumillas | https://github.com/soloproyectos-js/jquery.sp-require/blob/master/LICENSE */
!function(r){r.spRequireUtil=function(){},r.spRequireUtil.arrayUnique=function(e){var i=[];return r.each(e,function(r,e){var t=i.indexOf(e);0>t&&i.push(e)}),i}}(jQuery),function(r){r.spRequireConfig=function(r){this._parse(r)},r.spRequireConfig.prototype._libraries={},r.spRequireConfig.prototype._parse=function(e){var i=this;r.isPlainObject(e)||r.error("Invalid config object"),this._libraries={};var t=e.libraries||{};r.each(t,function(e,t){var s={},o=t.sources||{};"object"!=r.type(o)&&r.error("Invalid 'libraries.<libName>.sources' attribute");var a=o.js||[];"array"!=r.type(a)&&r.error("Invalid 'libraries.<libName>.sources.js' attribute"),r.each(a,function(e,i){"string"!==r.type(i)&&r.error("Invalid 'libraries.<libName>.sources.js[string]' value")}),s.jsSources=a;var n=o.css||[];"array"!=r.type(n)&&r.error("Invalid 'libraries.<libName>.sources.css' attribute"),r.each(n,function(e,i){"string"!==r.type(i)&&r.error("Invalid 'libraries.<libName>.sources.css[string]' value")}),s.cssSources=n;var u=t.requires||[];"array"!=r.type(u)&&r.error("Invalid 'libraries.requires' attribute"),s.requires=u,i._libraries[e]=s})},r.spRequireConfig.prototype.getLibraries=function(){return this._libraries}}(jQuery),function(r){r.spRequireLibrary=function(){this._libraries=[],this._jsSources=[],this._cssSources=[]},r.spRequireLibrary.prototype._libraries=null,r.spRequireLibrary.prototype._jsSources=null,r.spRequireLibrary.prototype._cssSources=null,r.spRequireLibrary.prototype.addJs=function(r){this._jsSources.push(this._getAbsoluteUrl(r))},r.spRequireLibrary.prototype.addCss=function(r){this._cssSources.push(this._getAbsoluteUrl(r))},r.spRequireLibrary.prototype.addLibrary=function(r){this._libraries.push(r)},r.spRequireLibrary.prototype._getJsSources=function(){return this._getSources("_jsSources")},r.spRequireLibrary.prototype._getCssSources=function(){return this._getSources("_cssSources")},r.spRequireLibrary.prototype._getSources=function(e,i){var t=[];return void 0===i&&(i=[]),i.push(this),r.each(this._libraries,function(){if(r.inArray(this,i)<0){var s=this._getSources(e,i);Array.prototype.push.apply(t,s)}}),Array.prototype.push.apply(t,this[e]),r.spRequireUtil.arrayUnique(t)},r.spRequireLibrary.prototype._getAbsoluteUrl=function(r){var e=document.createElement("a");return e.href=r,e.href}}(jQuery),function(r){r.spRequireManager=function(){this._libraries=[]},r.spRequireManager.prototype._libraries=null,r.spRequireManager.prototype.addLibrary=function(r){this._libraries.push(r)},r.spRequireManager.prototype.load=function(){return this._loadCss(),this._loadJs()},r.spRequireManager.prototype._loadCss=function(){var e=this._getCssSources();r(function(){r.each(e,function(e,i){r("head").append(r('<link rel="stylesheet" type="text/css" />').attr("href",i))})})},r.spRequireManager.prototype._loadJs=function(){var e=new r.Deferred,i=this._getJsSources(),t=i.length,s=!0;return r(function(){t>0?r.each(i,function(i,o){r.ajax({url:o,dataType:"script",cache:!0}).fail(function(){s=!1}).always(function(){t--,1>t&&e[s?"resolve":"reject"]()})}):e.resolve()}),e.promise()},r.spRequireManager.prototype._getJsSources=function(){return this._getSources("_getJsSources")},r.spRequireManager.prototype._getCssSources=function(){return this._getSources("_getCssSources")},r.spRequireManager.prototype._getSources=function(e){var i=[];return r.each(this._libraries,function(){var r=this[e]();Array.prototype.push.apply(i,r)}),r.spRequireUtil.arrayUnique(i)}}(jQuery),function(r){var e={},i={},t={init:function(e,t){var s=new r.spRequireManager;return r.each(e,function(e,t){var o=i[t];void 0===o&&r.error("Library not found: "+t),s.addLibrary(i[t])}),s.load().done(t)},config:function(t){if(null!==t){var t=new r.spRequireConfig(t),s=t.getLibraries();r.each(s,function(e,t){var s=t.jsSources,o=t.cssSources,a=new r.spRequireLibrary;r.each(s,function(r,e){a.addJs(e)}),r.each(o,function(r,e){a.addCss(e)}),i[e]=a}),r.each(s,function(e,t){var s=t.requires;if(void 0!==s){var o=i[e];r.each(s,function(r,e){var t=i[e];o.addLibrary(t)})}})}return e=t}};r.require=function(){var e=Array.prototype.slice.call(arguments),i="init";e.length>0&&"string"==r.type(e[0])&&(i=e[0],e=e.slice(1));var s=t[i];return void 0===s&&r.error("Method not found: "+i),s.apply(this,e)}}(jQuery);