/*! jQuery.spRequire v0.1.5 | Copyright (c) 2015 Gonzalo Chumillas | https://github.com/soloproyectos-js/jquery.sp-require/blob/master/LICENSE */
!function(r){r.spRequireUtil=function(){},r.spRequireUtil.arrayUnique=function(e){var s=[];return r.each(e,function(r,e){var t=s.indexOf(e);0>t&&s.push(e)}),s}}(jQuery),function(r){r.spRequireConfigParser=function(r){this._libraries={},this._parse(r)},r.spRequireConfigParser.prototype._errorMessage="Invalid '%library-name%' library. Expected 'string', 'Array.<string>' or '{\n	sources: {\n		js: 'string' or 'Array.<string>',  // not required\n		css: 'string' or 'Array.<string>'  // not required\n	},\n	requires: 'string' or 'Array.<string>' // not required\n}'",r.spRequireConfigParser.prototype._libraries,r.spRequireConfigParser.prototype._parse=function(e){var s=this;r.isPlainObject(e)||r.error("Invalid config object"),this._libraries={};var t=e.hasOwnProperty("libraries")?e.libraries:{},i=r.type(t);"object"!=i&&r.error("Invalid 'libraries' property. Expected object, given "+i),r.each(t,function(e,i){var o={sources:{js:[],css:[]},requires:[]};try{o.sources.js=s._parseAttr(t,e,{}),"object"==r.type(o.sources.js)&&(o.sources.js=s._parseAttr(o.sources.js,"sources",{}),"object"==r.type(o.sources.js)&&(o.sources.css=s._parseAttr(o.sources.js,"css"),o.sources.js=s._parseAttr(o.sources.js,"js")),o.requires=s._parseAttr(i,"requires"))}catch(n){r.error(s._errorMessage.replace("%library-name%",e))}s._libraries[e]=o})},r.spRequireConfigParser.prototype._parseAttr=function(e,s,t){void 0===t&&(t=[]);var i=e.hasOwnProperty(s)?e[s]:t,o=r.type(i);return"string"==o?i=[i]:"array"==o?r.each(i,function(e,s){"string"!=r.type(s)&&r.error("Invalid type")}):(arguments.length<3||o!=r.type(t))&&r.error("Invalid type"),i},r.spRequireConfigParser.prototype.getLibraries=function(){return this._libraries}}(jQuery),function(r){r.spRequireLibrary=function(){this._libraries=[],this._jsSources=[],this._cssSources=[]},r.spRequireLibrary.prototype._libraries=null,r.spRequireLibrary.prototype._jsSources=null,r.spRequireLibrary.prototype._cssSources=null,r.spRequireLibrary.prototype.addJs=function(r){this._jsSources.push(this._getAbsoluteUrl(r))},r.spRequireLibrary.prototype.addCss=function(r){this._cssSources.push(this._getAbsoluteUrl(r))},r.spRequireLibrary.prototype.addLibrary=function(r){this._libraries.push(r)},r.spRequireLibrary.prototype._getJsSources=function(){return this._getSources("_jsSources")},r.spRequireLibrary.prototype._getCssSources=function(){return this._getSources("_cssSources")},r.spRequireLibrary.prototype._getSources=function(e,s){var t=[];return void 0===s&&(s=[]),s.push(this),r.each(this._libraries,function(){if(r.inArray(this,s)<0){var i=this._getSources(e,s);Array.prototype.push.apply(t,i)}}),Array.prototype.push.apply(t,this[e]),r.spRequireUtil.arrayUnique(t)},r.spRequireLibrary.prototype._getAbsoluteUrl=function(r){var e=document.createElement("a");return e.href=r,e.href}}(jQuery),function(r){r.spRequireManager=function(){this._libraries=[]},r.spRequireManager.prototype._libraries=null,r.spRequireManager.prototype.addLibrary=function(r){this._libraries.push(r)},r.spRequireManager.prototype.load=function(){return this._loadCss(),this._loadJs()},r.spRequireManager.prototype._loadCss=function(){var e=this._getCssSources();r(function(){r.each(e,function(e,s){r("head").append(r('<link rel="stylesheet" type="text/css" />').attr("href",s))})})},r.spRequireManager.prototype._loadJs=function(){var e=new r.Deferred,s=this._getJsSources(),t=s.length,i=!0;return r(function(){t>0?r.each(s,function(s,o){r.ajax({url:o,dataType:"script",cache:!0}).fail(function(r,e,s){"parsererror"==e&&console.error(s),i=!1}).always(function(){t--,1>t&&e[i?"resolve":"reject"]()})}):e.resolve()}),e.promise()},r.spRequireManager.prototype._getJsSources=function(){return this._getSources("_getJsSources")},r.spRequireManager.prototype._getCssSources=function(){return this._getSources("_getCssSources")},r.spRequireManager.prototype._getSources=function(e){var s=[];return r.each(this._libraries,function(){var r=this[e]();Array.prototype.push.apply(s,r)}),r.spRequireUtil.arrayUnique(s)}}(jQuery),function(r){var e={},s={},t={init:function(e,t){var i=new r.spRequireManager;return r.each(e,function(e,t){var o=s[t];void 0===o&&r.error("Library not found: "+t),i.addLibrary(s[t])}),i.load().done(t)},config:function(t){if(void 0!==t){var i=new r.spRequireConfigParser(t),o=i.getLibraries();s={},r.each(o,function(e,t){var i=t.sources.js,o=t.sources.css,n=new r.spRequireLibrary;r.each(i,function(r,e){n.addJs(e)}),r.each(o,function(r,e){n.addCss(e)}),s[e]=n}),r.each(o,function(e,t){var i=t.requires;if(void 0!==i){var o=s[e];r.each(i,function(e,t){var i=s[t];void 0===i&&r.error("Library not found: "+t),o.addLibrary(i)})}}),e=t}return e}};r.require=function(){var e=Array.prototype.slice.call(arguments),s="init";e.length>0&&"string"==r.type(e[0])&&(s=e[0],e=e.slice(1));var i=t[s];return void 0===i&&r.error("Method not found: "+s),i.apply(this,e)}}(jQuery);